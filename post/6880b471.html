<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>cookie&amp;session | cout&lt;&lt;&quot;金缕衣&quot;;</title><meta name="author" content="下完这场雨"><meta name="copyright" content="下完这场雨"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="会话追踪技术会话&amp;会话跟踪会话：用户打开浏览器，访问web服务器的资源，会话建立，直到有一方断开连接，会话结束。在一次会话中可以包含多次请求和响应     服务器是不知道请求1和请求2是否来自同一个会话     会话跟踪：一种维护浏览器状态的方法，服务器需要识别多次请求是否来自于同一浏览器，以便在同一次会话的多次请求间共享数据  实现方式  客户端会话跟踪技术Cookie 服务端会话跟踪技">
<meta property="og:type" content="article">
<meta property="og:title" content="cookie&amp;session">
<meta property="og:url" content="https://017328.xyz/post/6880b471.html">
<meta property="og:site_name" content="cout&lt;&lt;&quot;金缕衣&quot;;">
<meta property="og:description" content="会话追踪技术会话&amp;会话跟踪会话：用户打开浏览器，访问web服务器的资源，会话建立，直到有一方断开连接，会话结束。在一次会话中可以包含多次请求和响应     服务器是不知道请求1和请求2是否来自同一个会话     会话跟踪：一种维护浏览器状态的方法，服务器需要识别多次请求是否来自于同一浏览器，以便在同一次会话的多次请求间共享数据  实现方式  客户端会话跟踪技术Cookie 服务端会话跟踪技">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://017328.xyz/img/sky5.jpg">
<meta property="article:published_time" content="2024-01-30T14:17:47.000Z">
<meta property="article:modified_time" content="2024-03-04T02:42:40.372Z">
<meta property="article:author" content="下完这场雨">
<meta property="article:tag" content="cookie,session">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://017328.xyz/img/sky5.jpg"><link rel="shortcut icon" href="/img/icon.png"><link rel="canonical" href="https://017328.xyz/post/6880b471.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 下完这场雨","link":"链接: ","source":"来源: cout<<\"金缕衣\";","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'cookie&session',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-03-04 10:42:40'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><script src="//code.tidio.co/xysdkaby5vgv2dt8e9zgdqsu6wh59g43.js" async></script><link rel="stylesheet" href="/css/mouse.css"><link rel="stylesheet" href="/css/mystyle.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_4770397_jz6ucve7mog.css<link rel="stylesheet" href="/css/ancientPoetry.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/h.gif" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">63</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">33</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">24</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Video</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于帅比</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/sky5.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="cout&lt;&lt;&quot;金缕衣&quot;;"><img class="site-icon" src="/img/icon.png"/><span class="site-name">cout&lt;&lt;&quot;金缕衣&quot;;</span></a></span><div id="wearher"></div><div id="tp-weather-widget"></div><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Video</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于帅比</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">cookie&amp;session</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-01-30T14:17:47.000Z" title="发表于 2024-01-30 22:17:47">2024-01-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-03-04T02:42:40.372Z" title="更新于 2024-03-04 10:42:40">2024-03-04</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/javaweb/">javaweb</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">14k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>65分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="cookie&amp;session"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="会话追踪技术"><a href="#会话追踪技术" class="headerlink" title="会话追踪技术"></a>会话追踪技术</h1><h2 id="会话-会话跟踪"><a href="#会话-会话跟踪" class="headerlink" title="会话&amp;会话跟踪"></a>会话&amp;会话跟踪</h2><p>会话：用户打开浏览器，<strong>访问web服务器的资源，会话建立</strong>，<strong>直到有一方断开连接，会话结束</strong>。在<strong>一次会话中可以包含多次请求和响应</strong></p>
<img src="/post/6880b471/image-20240120161212251.png" class="" title="image-20240120161212251">

<blockquote>
<p> 服务器是不知道请求1和请求2是否来自同一个会话</p>
 <img src="/post/6880b471/image-20240120161957913.png" class="" title="image-20240120161957913"> 
</blockquote>
<p>会话跟踪：一种维护浏览器状态的方法，服务器需要识别多次请求是否来自于同一浏览器，以便在<strong>同一次会话的多次请求间共享数据</strong></p>
<blockquote>
<p>实现方式</p>
<ol>
<li>客户端会话跟踪技术Cookie</li>
<li>服务端会话跟踪技术Session</li>
</ol>
</blockquote>
<h2 id="通俗的描述"><a href="#通俗的描述" class="headerlink" title="通俗的描述"></a>通俗的描述</h2><p><strong>会话：</strong> 在互联网上，<strong>会话</strong>通常指的是<strong>用户在一段时间内与一个网站或应用程序的交互</strong>。</p>
<p><strong>一个会话可以包括用户打开网站、浏览多个页面、进行交互、提交表单等一系列动作</strong>。</p>
<p><strong>会话跟踪技术：</strong> 会话跟踪技术是<strong>一组用于在Web应用程序中追踪用户活动和状态的方法</strong>。这些技术允许开发人员在用户访问不同页面或执行不同操作时保持一致的用户状态。</p>
<ol>
<li><strong>Cookies（Cookie会话跟踪）：</strong><ul>
<li><strong>描述：</strong> 就像是给用户贴上一个小标签，标签上记录了一些信息，随着用户访问不同页面，浏览器会把这个标签带上，服务器通过这个标签认出用户，知道用户是谁。</li>
<li><strong>比喻：</strong> 就好像在商店里拿了一个小卡片，上面有你的信息，每次你走到不同的部门，店员都能通过这个卡片知道你是同一个顾客。</li>
</ul>
</li>
<li><strong>URL重写（URL Rewriting）：</strong><ul>
<li><strong>描述：</strong> 就像是在用户访问网站的时候，在URL后面夹带一些信息，告诉服务器这个请求是属于哪个用户的，服务器通过解析URL中的信息来追踪用户。</li>
<li><strong>比喻：</strong> 就好像在邮件中夹带了一封信，信上写着你的名字，快递员通过信上的信息知道这个包裹是送给你的。</li>
</ul>
</li>
<li><strong>隐藏表单域（Hidden Form Fields）：</strong><ul>
<li><strong>描述：</strong> 就像是在一个看不见的表单中放了一些信息，当用户提交表单时，这些信息会被一同发送到服务器，服务器通过这些信息来辨认用户。</li>
<li><strong>比喻：</strong> 就好像在寄信的信封里放了一张纸条，里面写着你的名字，邮局收到信件时通过这张纸条知道是你寄的信。</li>
</ul>
</li>
<li><strong>会话管理器（Session Management）：</strong><ul>
<li><strong>描述：</strong> 就像是在服务器上给每个用户分配了一个专属的房间，用户在网站上活动时，信息都被存储在这个房间里，服务器通过这个房间来管理用户。</li>
<li><strong>比喻：</strong> 就好像在商店里有一个专门的休息室，你在休息室里的活动都被记录下来，店员通过休息室来追踪你的活动。</li>
</ul>
</li>
</ol>
<h2 id="学习准备"><a href="#学习准备" class="headerlink" title="学习准备"></a>学习准备</h2><p><a target="_blank" rel="noopener" href="https://xu-runbo.gitee.io/xu-runbo/post/fefee16a.html">HTTP&amp;TomCat&amp;Servelet | cout&lt;&lt;”金缕衣”; </a></p>
<ol>
<li>创建web项目框架</li>
</ol>
<img src="/post/6880b471/image-20240120163919073.png" class="" title="image-20240120163919073"> 

<h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><h3 id="Cookie的见解"><a href="#Cookie的见解" class="headerlink" title="Cookie的见解"></a>Cookie的见解</h3><blockquote>
<p>当我们谈论“Cookie发来发去”时，指的是在Web应用中，客户端（通常是浏览器）和服务器之间传递和使用Cookie的过程。让我们通过一个类比来理解这个过程：</p>
<h3 id="场景：邮递员和信件"><a href="#场景：邮递员和信件" class="headerlink" title="场景：邮递员和信件"></a>场景：邮递员和信件</h3><ol>
<li><p><strong>邮递员（浏览器）：</strong> 想象浏览器就像是一位邮递员，用户在网络上浏览不同的网站就相当于在城市中行走，而<strong>浏览器负责在用户和不同网站之间传递信息</strong>。</p>
</li>
<li><p><strong>信件（Cookie）：</strong> <strong>Cookie就像是一封信，里面可能包含了一些信息</strong>，比如用户的偏好、登录状态等。这封信由一个站点（服务器）发给另一个站点，随着用户的浏览活动被传递。</p>
</li>
<li><p><strong>寄信（服务器设置Cookie）：</strong> <strong>当用户访问一个网站时，服务器可能会给浏览器发一封信</strong>（设置Cookie）。这封信可能包含了用户的标识、偏好设置等信息。</p>
</li>
<li><p><strong>携带信件（用户浏览其他网站）：</strong> 用户在这个网站上浏览一会儿，然后<strong>转到了另一个网站</strong>。就像邮递员一样，浏览器会携带这封信（Cookie）继续用户的行程。</p>
</li>
<li><p><strong>接收信件（另一个站点的服务器接收Cookie）：</strong> 当用户到达另一个站点时，这个站点的服务器会接收到之前站点设置的信（Cookie）。这使得不同站点之间能够共享一些信息。</p>
</li>
<li><p><strong>打开信件查看信息（服务器读取Cookie）：</strong> 服务器可以打开这封信（读取Cookie），里面的信息可能帮助服务器了解用户的偏好、登录状态等，以提供更好的用户体验。</p>
</li>
</ol>
<p>解释Cookie在<strong>不同站点之间传递和共享信息的过程</strong>。通过Cookie，<strong>服务器可以在用户的不同请求之间保持一些状态信息，使得用户的互动更加连贯</strong></p>
<p>例如在购物网站中保持购物车的内容，或者在社交媒体中保持用户的登录状态。</p>
</blockquote>
<h3 id="Cookie的基本使用"><a href="#Cookie的基本使用" class="headerlink" title="Cookie的基本使用"></a>Cookie的基本使用</h3><img src="/post/6880b471/image-20240120171813091.png" class="" title="image-20240120171813091"> 

<p>Cookie是一种在<strong>客户端存储信息的小型文本文件</strong>，用于在<strong>Web浏览器和服务器之间存储和传递信息。</strong></p>
<p>通常被用来<strong>跟踪用户的状态、存储用户首选项以及实现一些其他的客户端和服务器之间的通信</strong>。</p>
<p>Cookie使用方法：</p>
<ol>
<li><p><strong>设置Cookie：</strong> <strong>服务器通过HTTP响应头将Cookie信息发送给浏览器</strong>，浏览器会将这些信息存储在本地。</p>
<p>在HTTP响应头中使用 <code>Set-Cookie</code> 字段：</p>
<figure class="highlight http"><table><tr><td class="code"><pre><span class="line"><span class="attribute">Set-Cookie</span><span class="punctuation">: </span>name=value; expires=Sat, 31 Dec 2022 23:59:59 GMT; path=/; domain=example.com; secure; HttpOnly</span><br></pre></td></tr></table></figure>

<ul>
<li><code>name=value</code>：设置Cookie的键值对。</li>
<li><code>expires</code>：设置Cookie的过期时间。</li>
<li><code>path</code>：指定Cookie的路径。</li>
<li><code>domain</code>：指定Cookie的域。</li>
<li><code>secure</code>：仅在通过HTTPS连接时发送Cookie。</li>
<li><strong><code>HttpOnly</code>：禁止通过JavaScript访问Cookie，提高安全性。</strong></li>
</ul>
</li>
<li><p><strong>读取Cookie：</strong> 浏览器会在每个请求中通过HTTP头部将Cookie信息发送给服务器。</p>
<p>在HTTP请求头中，包含了 <code>Cookie</code> 字段：</p>
<figure class="highlight http"><table><tr><td class="code"><pre><span class="line"><span class="attribute">Cookie</span><span class="punctuation">: </span>name=value; anotherCookie=anotherValue</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>JavaScript中的操作：</strong> 在JavaScript中，可以通过 <strong><code>document.cookie</code> 来读取和设置Cookie。</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设置Cookie</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&quot;username=John Doe; expires=Thu, 18 Dec 2023 12:00:00 UTC; path=/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取Cookie</span></span><br><span class="line"><span class="keyword">let</span> userCookie = <span class="variable language_">document</span>.<span class="property">cookie</span>;</span><br></pre></td></tr></table></figure>

<p>注意：JavaScript中的 <code>document.cookie</code> 操作有一些限制，因为安全性考虑，<strong>不能直接访问所有Cookie。</strong></p>
</li>
<li><p><strong>服务器端处理：</strong> 在服务器端，可以通过读取HTTP请求头中的 <code>Cookie</code> 字段来获取客户端发送的Cookie信息。</p>
</li>
</ol>
<p>Cookie通常用于存储用户会话标识、首选项、跟踪用户活动等信息。 要注意使用Cookie时的安全性和隐私保护。</p>
<h3 id="发送cookie"><a href="#发送cookie" class="headerlink" title="发送cookie"></a>发送cookie</h3><img src="/post/6880b471/image-20240120173707752.png" class="" title="image-20240120173707752"> 

<p>Aservlet.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Aservlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//我们创建会话</span></span><br><span class="line">        Cookie cookie=<span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//发送cookie</span></span><br><span class="line">        resp.addCookie(cookie);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="http://localhost:9527/cookiesession_war/hello">localhost:9527&#x2F;cookiesession_war&#x2F;hello</a></p>
<p>F12网络活动检测</p>
<img src="/post/6880b471/image-20240120165345585.png" class="" title="image-20240120165345585">

<p>或者到浏览器设置里 </p>
<img src="/post/6880b471/image-20240120165429106.png" class="" title="image-20240120165429106">

<p>默认是浏览会话结束就销毁了</p>
<h3 id="获取cookies"><a href="#获取cookies" class="headerlink" title="获取cookies"></a>获取cookies</h3><img src="/post/6880b471/image-20240120173654448.png" class="" title="image-20240120173654448"> 

<p>Bservlet.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/world&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bservlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取浏览器发过来的所有cookies</span></span><br><span class="line">        Cookie[] cookies=req.getCookies();</span><br><span class="line">        <span class="comment">//遍历！</span></span><br><span class="line">        <span class="keyword">for</span>(Cookie c:cookies)</span><br><span class="line">        &#123;</span><br><span class="line">            String name=c.getName();</span><br><span class="line">            <span class="keyword">if</span>(name.equals(<span class="string">&quot;username&quot;</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                String value=c.getValue();</span><br><span class="line">                System.out.println(<span class="string">&quot;name是&quot;</span>+name+<span class="string">&quot;值是&quot;</span>+value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="/post/6880b471/PixPin01-20_17-02-55.gif" class="" title="PixPin01-20_17-02-55">

<p>当浏览器访问一个站点时，它会<strong>将与该站点相关的所有Cookie信息包含在HTTP请求头中的 <code>Cookie</code> 字段中</strong>。这些Cookie信息是由之前访问的站点设置的，并且通常包含了一些用户状态或其他需要在不同请求之间共享的数据。 </p>
<img src="/post/6880b471/image-20240120171842359.png" class="" title="image-20240120171842359"> 

<h3 id="Cookie原理"><a href="#Cookie原理" class="headerlink" title="Cookie原理"></a>Cookie原理</h3><img src="/post/6880b471/image-20240120173329899.png" class="" title="image-20240120173329899"> 

<p>Cookie的核心原理非常简单，它基于HTTP协议，用于在客户端（通常是浏览器）和服务器之间传递和存储少量数据。以下是Cookie的核心原理：</p>
<ol>
<li><p><strong>创建Cookie：</strong> 当用户访问一个网站时，服务器可以通过<strong>HTTP响应头的 <code>Set-Cookie</code> 字段</strong>在用户的浏览器中创建一个Cookie。这个<strong>Cookie包含了一些键值对，通常用于存储用户的状态、偏好设置等信息</strong>。</p>
<figure class="highlight http"><table><tr><td class="code"><pre><span class="line"><span class="attribute">Set-Cookie</span><span class="punctuation">: </span>username=John; expires=Sat, 31 Dec 2022 23:59:59 GMT; path=/; domain=example.com; secure; HttpOnly</span><br></pre></td></tr></table></figure>

<p>上述示例中，创建了一个名为 <code>username</code> 的Cookie，值为 <code>John</code>。</p>
</li>
<li><p><strong>存储在客户端：</strong> 浏览器在接收到这个Cookie后，会将它存储在本地，通常是在用户的Cookie存储区域。</p>
</li>
<li><p><strong>发送到服务器：</strong> 当用户再次访问同一站点时，浏览器会将之前存储的Cookie信息通过HTTP请求头的 <code>Cookie</code> 字段发送给服务器。</p>
<figure class="highlight http"><table><tr><td class="code"><pre><span class="line"><span class="attribute">Cookie</span><span class="punctuation">: </span>username=John</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>服务器读取Cookie：</strong> 服务器在接收到请求后，通过读取 <code>Cookie</code> 字段，可以获取之前设置的Cookie信息。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       <span class="comment">//获取浏览器发过来的所有cookies</span></span><br><span class="line">       Cookie[] cookies=req.getCookies();</span><br><span class="line">       <span class="comment">//遍历！</span></span><br><span class="line">    <span class="keyword">for</span>(Cookie c:cookies)</span><br><span class="line">       &#123;</span><br><span class="line">           String name=c.getName();</span><br><span class="line">           <span class="keyword">if</span>(name.equals(<span class="string">&quot;username&quot;</span>))</span><br><span class="line">           &#123;</span><br><span class="line">            String value=c.getValue();</span><br><span class="line">               System.out.println(<span class="string">&quot;name是&quot;</span>+name+<span class="string">&quot;值是&quot;</span>+value);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">总体来说，**Cookie的核心原理就是通过HTTP响应头在服务器端创建**，然后由浏览器存储，之后在每次HTTP请求中通过**请求头发送给服务器**。实现了客户端和服务器之间的状态共享和信息传递。</span><br><span class="line"></span><br><span class="line">### Cookie使用细节</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### Cookie的存活时间</span><br><span class="line"></span><br><span class="line">![image-20240120174639307](CookieSession/image-20240120174639307.png) </span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">对于会话cookie</span><br><span class="line"></span><br><span class="line">cookie是存储在浏览器的内存中的，会随着浏览器的关闭而销毁，所以</span><br><span class="line"></span><br><span class="line">我们先去访问hello让服务器给浏览器发送一个cookie</span><br><span class="line"></span><br><span class="line">现在我们关闭浏览器然后</span><br><span class="line"></span><br><span class="line">去访问world的适合，就不会看到任何输出了</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">Cookie的存活时间不仅与浏览器是否关闭有关，还与Cookie本身的设置有关。</span><br><span class="line"></span><br><span class="line">1. **会话Cookie：** 如果创建Cookie时没有设置 `Expires` 或 `Max-Age` 字段，这个Cookie就是**会话Cookie**。**会话Cookie的生命周期仅在用户会话期间有效。**当用户关闭浏览器时，这些Cookie通常会被删除。</span><br><span class="line"></span><br><span class="line">    ```http</span><br><span class="line">    Set-Cookie: username=John; // 会话Cookie</span><br></pre></td></tr></table></figure>

<pre><code>上述例子中，`username=John` 是一个会话Cookie，它将在**用户关闭浏览器时失效。**
</code></pre>
<ol start="2">
<li><p><strong>持久性Cookie：</strong> 如果创建Cookie时设置了 <strong><code>Expires</code> 或 <code>Max-Age</code> 字段</strong>，这个Cookie是<strong>持久性Cookie</strong>。它将在<strong>指定的过期时间之后失效，而不受浏览器关闭的影响。</strong></p>
<figure class="highlight http"><table><tr><td class="code"><pre><span class="line"><span class="attribute">Set-Cookie</span><span class="punctuation">: </span>username=John; expires=Sat, 31 Dec 2022 23:59:59 GMT; // 持久性Cookie</span><br></pre></td></tr></table></figure>

<p>上述例子中，<code>username=John</code> 是一个持久性Cookie，它将在2022年12月31日23时59分59秒（GMT时间）之后失效，不受浏览器关闭的影响。</p>
</li>
</ol>
<h4 id="方法测试"><a href="#方法测试" class="headerlink" title="&#x3D;&#x3D;方法测试&#x3D;&#x3D;"></a>&#x3D;&#x3D;方法测试&#x3D;&#x3D;</h4><p>发送cookie的适合就设置</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Aservlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//我们创建会话</span></span><br><span class="line">        Cookie cookie=<span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;zhangsan&quot;</span>);</span><br><span class="line">        <span class="comment">//只能是字符串，字符串，可以有多个cookie</span></span><br><span class="line">        <span class="comment">//当然也可与给多个cookie设置存活时间</span></span><br><span class="line"></span><br><span class="line">        cookie.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">60</span>);</span><br><span class="line">        <span class="comment">//一周，需要转换为秒</span></span><br><span class="line">        <span class="comment">//发送cookie</span></span><br><span class="line">        resp.addCookie(cookie);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>效果</p>
<img src="/post/6880b471/image-20240120175012655.png" class="" title="image-20240120175012655"> 

<h4 id="Cookie存储中文"><a href="#Cookie存储中文" class="headerlink" title="Cookie存储中文"></a>Cookie存储中文</h4><p>cookie的键值对存储一个中文的时候是个怎么情况呢？</p>
<p>答案是。。</p>
<img src="/post/6880b471/image-20240120175215084.png" class="" title="image-20240120175215084"> 

<p>默认是不可以存储中文的</p>
<p>如何存储中文呢？</p>
<h4 id="如何解决呢"><a href="#如何解决呢" class="headerlink" title="如何解决呢"></a>如何解决呢</h4><p>发送cookie的时候</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.URLDecoder;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Aservlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//我们创建会话</span></span><br><span class="line">        String value= URLEncoder.encode(<span class="string">&quot;张三&quot;</span>,<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        Cookie cookie=<span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;username&quot;</span>,value);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;cookie里的username是&quot;</span>+value);</span><br><span class="line">        cookie.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">60</span>);</span><br><span class="line">        <span class="comment">//一周，需要转换为秒</span></span><br><span class="line">        <span class="comment">//发送cookie</span></span><br><span class="line">        resp.addCookie(cookie);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<hr>
<p>world的servlet</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.URLDecoder;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/world&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Bservlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取浏览器发过来的所有cookies</span></span><br><span class="line">        Cookie[] cookies = req.getCookies();</span><br><span class="line">        <span class="comment">//遍历！</span></span><br><span class="line">        <span class="keyword">for</span> (Cookie c : cookies) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> c.getName();</span><br><span class="line">            <span class="keyword">if</span> (name.equals(<span class="string">&quot;username&quot;</span>)) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> c.getValue();</span><br><span class="line"></span><br><span class="line">                value= URLDecoder.decode(value,<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;name是&quot;</span> + name + <span class="string">&quot;值是&quot;</span> + value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        String s=req.getParameter(<span class="string">&quot;Cookie&quot;</span>);</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">       doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>我们访问<a target="_blank" rel="noopener" href="http://localhost:9527/cookiesession_war/hello">localhost:9527&#x2F;cookiesession_war&#x2F;hello</a></p>
<img src="/post/6880b471/image-20240120175744684.png" class="" title="image-20240120175744684">

<img src="/post/6880b471/image-20240120175855814.png" class="" title="image-20240120175855814"> 

<p>再访问<a target="_blank" rel="noopener" href="http://localhost:9527/cookiesession_war/world">localhost:9527&#x2F;cookiesession_war&#x2F;world</a></p>
<img src="/post/6880b471/image-20240120175749043.png" class="" title="image-20240120175749043">

<img src="/post/6880b471/image-20240120175906288.png" class="" title="image-20240120175906288"> 

<p>虽然浏览器传递的进制，服务端解码后就可以得到真正的汉字了！！！</p>
<h2 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h2><h3 id="Session引入"><a href="#Session引入" class="headerlink" title="Session引入"></a>Session引入</h3><blockquote>
<p>服务端会话跟踪技术：将数据保存到服务端</p>
<p>JavaEE提供HttpSession接口，实现一次会话的多次请求间数据共享功能</p>
</blockquote>
<h4 id="Session概念和作用"><a href="#Session概念和作用" class="headerlink" title="Session概念和作用"></a>Session概念和作用</h4><blockquote>
<p>Session 是一种用于在Web应用中跟踪用户状态、维护用户身份和存储临时数据的机制。</p>
</blockquote>
<h4 id="Seesion的生命周期"><a href="#Seesion的生命周期" class="headerlink" title="Seesion的生命周期"></a>Seesion的生命周期</h4><blockquote>
<p>Session 的生命周期包括创建、维护和销毁，通常始于用户访问应用并在一段时间后结束。</p>
</blockquote>
<h4 id="会话标识符"><a href="#会话标识符" class="headerlink" title="会话标识符"></a>会话标识符</h4><blockquote>
<p>会话标识符是一种唯一的标志，用于标识用户在一个会话期间的身份和状态，通常通过Cookie、Token或其他机制来实现。</p>
</blockquote>
<h3 id="Session的基本使用"><a href="#Session的基本使用" class="headerlink" title="Session的基本使用"></a>Session的基本使用</h3><img src="/post/6880b471/image-20240122164805309.png" class="" title="image-20240122164805309"> 

<p><strong>Session 可以实现在一次会话的多次请求之间共享数据</strong>，当用户首次访问服务器时，服务器会为该用户创建一个唯一的<strong>会话标识符</strong>。在<strong>服务器端分配存储空间用于存储与该会话相关的数据</strong>。接下来的每个用户请求中，<strong>该会话标识符会被包含在请求中</strong></p>
<p>服务器通<strong>过这个标识符来识别用户</strong>，在服务器端，可以存储用户的登录状态、购物车内容、用户首选项等信息。这样，<strong>无需在每个请求中都重新验证用户或重新获取这些数据</strong>，实现了在一次会话的多次请求之间共享数据的目的。</p>
<p>比如基于 Cookie 的 Session，会话数据可能存储在服务器端的内存、数据库或其他持久化存储中。而基于 Token 的 Session 则可能将数据加密在令牌中，并在每个请求中传递该令牌以实现状态的共享。</p>
<hr>
<p>Sessiondemo1.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.service.sessions;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="meta">@WebServlet(&quot;/s1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Sessiondemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//   获取 HttpSession 对象，如果不存在则创建一个新的</span></span><br><span class="line">        HttpSession httpSession=req.getSession();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将用户名 &quot;zs&quot; 存储在 HttpSession 中的 &quot;username&quot; 属性中</span></span><br><span class="line">        httpSession.setAttribute(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;zs&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Sessiondemo2.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.service.sessions;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/s2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Sessiondemo2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 获取 HttpSession 对象，如果不存在则创建一个新的</span></span><br><span class="line">        HttpSession httpSession=req.getSession();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 从 HttpSession 中获取之前存储的 &quot;username&quot; 属性</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> httpSession.getAttribute(<span class="string">&quot;username&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 打印获取到的用户名信息</span></span><br><span class="line">        System.out.println(<span class="string">&quot;session中的用户名：&quot;</span> + object);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>效果就是</p>
<p>先访问<a target="_blank" rel="noopener" href="http://localhost:9527/cookiesession_war/s1">localhost:9527&#x2F;cookiesession_war&#x2F;s1</a></p>
<blockquote>
<p>通过<code>req.getSession()</code>获取<code>HttpSession</code>对象时，<strong>Servlet容器会检查请求中是否包含会话标识符</strong>。如果请求中包含有效的会话标识符，它将返回与该标识符相关联的 <code>HttpSession</code> 对象；如果没有会话标识符，它将创建一个新的 <code>HttpSession</code> 对象，<strong>并将相应的会话标识符发送给客户端</strong>。这样就确保了在整个会话期间，<code>HttpSession</code> 对象能够在<strong>多次请求之间共享数据</strong>。</p>
</blockquote>
<p>访问<a target="_blank" rel="noopener" href="http://localhost:9527/cookiesession_war/s2">localhost:9527&#x2F;cookiesession_war&#x2F;s2</a></p>
<p>现在访问就能用到创建好的session对象了,并且可以读取我们存入的信息</p>
<blockquote>
<p>会话标识符在客户端和服务器之间传递，通过这种机制，Servlet容器能够识别并关联同一用户的多个请求，从而创建或获取相应的 <code>HttpSession</code> 对象。</p>
<p><strong>两次获取的是同一个session</strong></p>
</blockquote>
<p>控制台输出</p>
<img src="/post/6880b471/image-20240122164700178.png" class="" title="image-20240122164700178"> 

<h3 id="Session原理"><a href="#Session原理" class="headerlink" title="Session原理"></a>Session原理</h3><p>为什么<strong>两次获取的是同一个session</strong>？</p>
<p>服务器如何做到识别同一次会话里的不同请求呢？</p>
<img src="/post/6880b471/image-20240122173428103.png" class="" title="image-20240122173428103">

<p>代码演示：</p>
<p>当我们访问<a target="_blank" rel="noopener" href="http://localhost:9527/cookiesession_war/s1">localhost:9527&#x2F;cookiesession_war&#x2F;s1</a></p>
<img src="/post/6880b471/image-20240122174141730.png" class="" title="image-20240122174141730">

<p> 然后访问<a target="_blank" rel="noopener" href="http://localhost:9527/cookiesession_war/s2">localhost:9527&#x2F;cookiesession_war&#x2F;s2</a></p>
<p>浏览器拿着cookie去访问服务器了</p>
<img src="/post/6880b471/image-20240122174435946.png" class="" title="image-20240122174435946">

<blockquote>
<p>解释</p>
<p>涉及到 Session 的创建、标识符传递以及在后续请求中如何利用这个标识符来找回相应的 Session。以下是您描述的两次请求、两个 Servlet、一个 Session 的逻辑关系：</p>
<ol>
<li><p><strong>请求一：</strong></p>
<ul>
<li>用户首次访问服务器，请求 Servlet1。</li>
<li>Servlet1 通过 <code>req.getSession()</code> 获取 <code>HttpSession</code> 对象。</li>
<li>因为这是用户的第一次访问，服务器发现请求中没有包含会话标识符（例如，没有包含会话Cookie）。</li>
<li><strong>服务器为用户创建</strong>一个新的 <code>HttpSession</code> 对象，并生成一个唯一的会话标识符（例如，ID&#x3D;10）。</li>
<li>服务器将这个会话标识符通过响应的 Set-Cookie 头部发送给客户端浏览器，例如：<code>Set-Cookie: id=10</code>。</li>
<li>客户端浏览器收到响应后，将这个 Cookie 存储起来，以便在后续的请求中发送给服务器。</li>
</ul>
</li>
<li><p><strong>请求二：</strong></p>
<ul>
<li>用户再次访问服务器，请求 Servlet2。</li>
<li>Servlet2 通过 <code>req.getSession()</code> 获取 <code>HttpSession</code> 对象。</li>
<li>此时，请求中包含了之前存储的会话标识符（Cookie: id&#x3D;10）。</li>
<li>服务器根据这个会话标识符找到了之前创建的 <code>HttpSession</code> 对象，因此这次获取的 <code>HttpSession</code> 与请求一中创建的是同一个。</li>
<li>Servlet2 可以从这个 <code>HttpSession</code> 中获取先前存储的数据。</li>
</ul>
</li>
<li><p><strong>另一个请求（没有携带会话标识符的情况）：</strong></p>
<ul>
<li>如果另一个用户或客户端发起请求，但是请求中没有包含之前设置的会话标识符（Cookie: id&#x3D;10）。</li>
<li>服务器将认为这是一个新的会话，会为该请求创建一个新的 <code>HttpSession</code> 对象，并为其生成一个新的唯一会话标识符。</li>
<li>这个请求的 <code>HttpSession</code> 将与之前的会话无关，无法获取之前存储的数据。</li>
</ul>
</li>
</ol>
<p>总体而言，<strong>会话标识符的传递是通过 Cookie 来实现的</strong>，客户端浏览器在请求中携带这个 Cookie，服务器通过这个标识符来关联和获取相应的 <code>HttpSession</code> 对象，从而实现在一次会话中共享数据。</p>
</blockquote>
<h3 id="Session使用细节"><a href="#Session使用细节" class="headerlink" title="Session使用细节"></a>Session使用细节</h3><hr>
<blockquote>
<ol>
<li><p><strong>创建 Session：</strong> 通过 <code>HttpServletRequest</code> 的 <code>getSession()</code> 方法可以获取或创建一个 <code>HttpSession</code> 对象。如果客户端请求中包含有效的会话标识符，该方法会返回与该标识符关联的 <code>HttpSession</code> 对象，否则将创建一个新的 <code>HttpSession</code>。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>设置和获取 Session 属性：</strong> 使用 <code>HttpSession</code> 对象的 <code>setAttribute(String name, Object value)</code> 方法来设置 Session 属性，使用 <code>getAttribute(String name)</code> 方法来获取属性的值。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设置 Session 属性</span></span><br><span class="line">session.setAttribute(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;John&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取 Session 属性</span></span><br><span class="line"><span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;username&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Session 过期时间：</strong> 可以<strong>通过配置或在代码中设置 Session 的过期时间</strong>。默认情况下，Session 将持续到浏览器关闭，但可以通过以下方式设置超时时间（以秒为单位）：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 设置 Session 过期时间为30分钟</span></span><br><span class="line">session.setMaxInactiveInterval(<span class="number">1800</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>手动使 Session 失效：</strong> 在某些情况下，您可能希望<strong>手动使 Session 失效</strong>。可以通过调用 <code>invalidate()</code> 方法来实现：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 手动使 Session 失效</span></span><br><span class="line">session.invalidate();</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>检查 Session 是否存在：</strong> 可以使用 <code>isNew()</code> 方法<strong>检查当前请求的 <code>HttpSession</code> 是否是新创建的</strong>，即是否是用户的第一次访问。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (session.isNew()) &#123;</span><br><span class="line">    <span class="comment">// 处理新会话的逻辑</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Cookie 配置：</strong> 默认情况下，Servlet容器会自动为每个新的 Session 创建一个包含会话标识符的 Cookie。如果需要更改 Cookie 的配置，可以使用 <code>Cookie</code> 对象进行调整。</p>
</li>
<li><p><strong>Session 监听器：</strong> 可以通过实现 <code>HttpSessionListener</code> 接口来创建 Session 监听器，监听 Session 的创建和销毁事件。这对于执行某些操作（例如记录日志）非常有用。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MySessionListener</span> <span class="keyword">implements</span> <span class="title class_">HttpSessionListener</span> &#123;</span><br><span class="line">    <span class="comment">// 实现监听器的方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>分布式环境：</strong> 在分布式系统中，确保多个服务器之间能够共享 Session 数据可能需要使用一些外部的存储机制，例如数据库或缓存系统。</p>
</li>
<li><p><strong>安全性：</strong> 避免在 Session 中存储敏感信息，因为 <strong>Session 数据通常存储在服务器端</strong>，但仍然可能受到某些攻击。确保使用 HTTPS 协议来加密数据传输，以增加安全性。</p>
</li>
</ol>
</blockquote>
<hr>
<h4 id="session钝化，活化："><a href="#session钝化，活化：" class="headerlink" title="session钝化，活化："></a>session钝化，活化：</h4><blockquote>
<p>服务器重启后，session种的数据是否还在？</p>
<p>钝化：在服务器正常关闭后，tomcat会自动将Session数据写入硬盘的文件种</p>
<p>活化：再次启动服务器后，从文件中加载数据到Session中</p>
<blockquote>
<p>将 Session 对象存储到外部存储介质（例如磁盘或数据库）和从外部存储介质中读取 Session 对象的过程</p>
<p>会有一个.sar文件的存在和删除，由tomcat自动完成的</p>
</blockquote>
<p>服务器关闭，session 数据不会丢失</p>
<p>但是浏览器不能关闭，才能实现共享数据。</p>
<p>id是通过cookie发送给浏览器的，在浏览器的内存里</p>
<p>浏览器一旦关闭，session就没了，session的id就随着cookie的销毁而销毁</p>
</blockquote>
<h4 id="Session的销毁"><a href="#Session的销毁" class="headerlink" title="Session的销毁"></a>Session的销毁</h4><p>默认是无操作，会造30mins自动销毁</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>30<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>tomcat里的配置是写死的</p>
<img src="/post/6880b471/image-20240122191659020.png" class="" title="image-20240122191659020">

<p>调用Session对象的invalidate方法，可以让session对象自动销毁 </p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><blockquote>
<p>Cookie 和 Session 是 Web 开发中常用的两种机制，用于在客户端和服务器之间保持状态信息。</p>
<h3 id="Cookie："><a href="#Cookie：" class="headerlink" title="Cookie："></a>Cookie：</h3><ol>
<li><p><strong>定义：</strong> Cookie 是一小段存<strong>储在客户端浏览器中的数据</strong>，由服务器发送到浏览器，并在后续的请求中被包含在请求头中发送给服务器。</p>
</li>
<li><p><strong>用途：</strong> 主要用于跟踪用户的状态、识别用户，实现用户个性化设置，以及在客户端存储少量数据。</p>
</li>
<li><p><strong>存储位置：</strong> 存储在客户端浏览器中，每个 Cookie 都有一个过期时间。</p>
</li>
<li><p><strong>安全性：</strong> Cookies 可以被禁用或删除，因此不适合存储敏感信息。可以设置 HttpOnly 属性来增加安全性，防止被恶意脚本访问。</p>
</li>
<li><p><strong>容量：</strong> 单个 Cookie 大小有限，通常为4KB左右。</p>
</li>
</ol>
<h3 id="Session："><a href="#Session：" class="headerlink" title="Session："></a>Session：</h3><ol>
<li><p><strong>定义：</strong> Session 是<strong>在服务器端保存的关联于用户的信息</strong>，通过会话标识符在客户端和服务器之间传递。</p>
</li>
<li><p><strong>用途：</strong> 用于在一次用户访问期间跟踪用户状态、维护用户身份和存储临时数据。</p>
</li>
<li><p><strong>存储位置：</strong> 存储在服务器端，通常在内存中，可以选择存储到数据库或文件系统中，具体取决于服务器的配置。</p>
</li>
<li><p><strong>安全性：</strong> 相对于 Cookie 更安全，因为 Session 数据存储在服务器端，客户端只有一个会话标识符。</p>
</li>
<li><p><strong>容量：</strong> 理论上没有特定大小限制，但实际上受服务器配置和性能的影响。</p>
</li>
</ol>
<h3 id="Cookie-和-Session-的关系："><a href="#Cookie-和-Session-的关系：" class="headerlink" title="Cookie 和 Session 的关系："></a>Cookie 和 Session 的关系：</h3><ol>
<li><p><strong>会话管理：</strong> <strong>Session 通常使用 Cookie 来传递会话标识符</strong>。客户端浏览器会保存这个标识符，并在后续的请求中将其发送给服务器。</p>
</li>
<li><p><strong>共同点：</strong> 两者都用于在无状态的 HTTP 协议中保持用户状态，但存储的位置和安全性不同。</p>
</li>
<li><p><strong>合理使用：</strong> Cookie 适合存储少量信息，而 <strong>Session 更适合存储大量、敏感的用户数据</strong>。</p>
</li>
</ol>
</blockquote>
<img src="/post/6880b471/image-20240122192729268.png" class="" title="image-20240122192729268"> 

<h2 id="综合案例"><a href="#综合案例" class="headerlink" title="综合案例"></a>综合案例</h2><h3 id="案例要求"><a href="#案例要求" class="headerlink" title="案例要求"></a>案例要求</h3><img src="/post/6880b471/image-20240129144524810.png" class="" title="image-20240129144524810"> 

<h3 id="web框架准备"><a href="#web框架准备" class="headerlink" title="web框架准备"></a>web框架准备</h3><ol>
<li><p>用maven创建项目</p>
<img src="/post/6880b471/image-20240129144613830.png" class="" title="image-20240129144613830"> 
</li>
<li><p>pom.xml加入<code>&lt;packaging&gt;war&lt;/packaging&gt;</code>并且刷新</p>
</li>
<li><p>加入web框架(webapp)</p>
</li>
</ol>
<h4 id="pojo下的User-java"><a href="#pojo下的User-java" class="headerlink" title="pojo下的User.java"></a>pojo下的User.java</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    Integer id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, username=&#x27;&quot;</span> + username + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, password=&#x27;&quot;</span> + password + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    String username ;</span><br><span class="line">    String password ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="pojo下的Brad-java"><a href="#pojo下的Brad-java" class="headerlink" title="pojo下的Brad.java"></a>pojo下的Brad.java</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.pojo;</span><br><span class="line"></span><br><span class="line"><span class="comment">//推荐使用包装的类型，因为没有M默认值</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Brand</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Integer  id           ;</span><br><span class="line">    <span class="keyword">private</span> String  rand_name    ;</span><br><span class="line">    <span class="keyword">private</span> String  company_name ;</span><br><span class="line">    <span class="keyword">private</span> Integer ordered      ;</span><br><span class="line">    <span class="keyword">private</span> String  description  ;</span><br><span class="line">    <span class="comment">//0禁用，1正常</span></span><br><span class="line">    <span class="keyword">private</span> Integer   status       ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Brand</span><span class="params">(Integer id, String rand_name, String company_name, Integer ordered, String description, Integer status)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.rand_name = rand_name;</span><br><span class="line">        <span class="built_in">this</span>.company_name = company_name;</span><br><span class="line">        <span class="built_in">this</span>.ordered = ordered;</span><br><span class="line">        <span class="built_in">this</span>.description = description;</span><br><span class="line">        <span class="built_in">this</span>.status = status;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Brand</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getRand_name</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> rand_name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRand_name</span><span class="params">(String rand_name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.rand_name = rand_name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCompany_name</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> company_name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCompany_name</span><span class="params">(String company_name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.company_name = company_name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getOrdered</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> ordered;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setOrdered</span><span class="params">(Integer ordered)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.ordered = ordered;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDescription</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> description;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDescription</span><span class="params">(String description)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.description = description;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getStatus</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> status;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStatus</span><span class="params">(Integer status)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.status = status;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Brand&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, rand_name=&#x27;&quot;</span> + rand_name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, company_name=&#x27;&quot;</span> + company_name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, ordered=&quot;</span> + ordered +</span><br><span class="line">                <span class="string">&quot;, description=&#x27;&quot;</span> + description + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, status=&quot;</span> + status +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="service下的UserService-java"><a href="#service下的UserService-java" class="headerlink" title="service下的UserService.java"></a>service下的UserService.java</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hello.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.hello.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.hello.utils.Getfactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> SqlSessionFactory factory= Getfactory.getsqlsessionfactory();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">login</span><span class="params">(String username,String password)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//获取sqlsession</span></span><br><span class="line">        SqlSession sqlSession=factory.openSession(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">//获取usermapper</span></span><br><span class="line">        UserMapper userMapper=sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="comment">//执行方法</span></span><br><span class="line">        User user=userMapper.select(username,password);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//释放资源</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>service下的BrandService.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hello.mapper.BrandMapper;</span><br><span class="line"><span class="keyword">import</span> com.hello.pojo.Brand;</span><br><span class="line"><span class="keyword">import</span> com.hello.utils.Getfactory;</span><br><span class="line"><span class="keyword">import</span> com.hello.utils.Getfactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BrandService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> SqlSessionFactory Factory= Getfactory.getsqlsessionfactory();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Brand&gt; <span class="title function_">selectAll</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//获取sqlsession对象</span></span><br><span class="line">        SqlSession sqlsession=Factory.openSession(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取mapper对象</span></span><br><span class="line">        BrandMapper brandMapper=sqlsession.getMapper(BrandMapper.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//执行sql语句</span></span><br><span class="line">        List&lt;Brand&gt; brands=brandMapper.selectall();</span><br><span class="line">        sqlsession.close();</span><br><span class="line">        <span class="keyword">return</span> brands;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Brand brand)</span></span><br><span class="line">    &#123;</span><br><span class="line">        SqlSession sqlsession=Factory.openSession(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取mapper对象</span></span><br><span class="line">        BrandMapper brandMapper=sqlsession.getMapper(BrandMapper.class);</span><br><span class="line"></span><br><span class="line">        brandMapper.add(brand);</span><br><span class="line"></span><br><span class="line">        sqlsession.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Brand <span class="title function_">selectById</span><span class="params">(<span class="type">int</span> id)</span></span><br><span class="line">    &#123;</span><br><span class="line">        SqlSession sqlsession=Factory.openSession(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取mapper对象</span></span><br><span class="line">        BrandMapper brandMapper=sqlsession.getMapper(BrandMapper.class);</span><br><span class="line"></span><br><span class="line">        Brand brand=brandMapper.selectById(id);</span><br><span class="line">        sqlsession.close();</span><br><span class="line">        <span class="keyword">return</span> brand;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Brand brand)</span></span><br><span class="line">    &#123;</span><br><span class="line">        SqlSession sqlsession=Factory.openSession(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取mapper对象</span></span><br><span class="line">        BrandMapper brandMapper=sqlsession.getMapper(BrandMapper.class);</span><br><span class="line"></span><br><span class="line">        brandMapper.update(brand);</span><br><span class="line"></span><br><span class="line">        sqlsession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="mybatis-config-xml"><a href="#mybatis-config-xml" class="headerlink" title="mybatis-config.xml"></a>mybatis-config.xml</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;https://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!--            数据库的连接信息--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql:///db&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;xurunbo&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    加载SQl的映射文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.hello.mapper&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>untitled23<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.32<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>7.0.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>servlet-api必须是provided，要不会出错！！！</p>
<h4 id="UserMapper接口"><a href="#UserMapper接口" class="headerlink" title="UserMapper接口"></a>UserMapper接口</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hello.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Insert;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select * from tb_user where username=#&#123;username&#125; and password=#&#123;password&#125;&quot;)</span></span><br><span class="line">    User <span class="title function_">select</span><span class="params">(<span class="meta">@Param(&quot;username&quot;)</span> String username, <span class="meta">@Param(&quot;password&quot;)</span> String password)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from tb_user;&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">selectall</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into tb_user(username,password) values(#&#123;username&#125;,#&#123;password&#125;);&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">adduser</span><span class="params">(<span class="meta">@Param(&quot;username&quot;)</span> String username, <span class="meta">@Param(&quot;password&quot;)</span> String password)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="seervlet下的LoginServlet-java"><a href="#seervlet下的LoginServlet-java" class="headerlink" title="seervlet下的LoginServlet.java"></a>seervlet下的LoginServlet.java</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.servlet;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hello.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.hello.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.hello.utils.Getfactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/login&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//        String path=req.getContextPath();</span></span><br><span class="line"><span class="comment">//        resp.getWriter().println(path);</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;先获取信息&quot;</span>);</span><br><span class="line">        resp.setHeader(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        String username=req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String password=req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        String resource = &quot;mybatis-config.xml&quot;;</span></span><br><span class="line"><span class="comment">//        InputStream inputStream = Resources.getResourceAsStream(resource);</span></span><br><span class="line"><span class="comment">//        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        //获取Sqlsussion对象</span></span><br><span class="line"><span class="comment">//        SqlSession sqlSession=sqlSessionFactory.openSession();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        优化为</span></span><br><span class="line">        SqlSession sqlSession= Getfactory.getsqlsessionfactory().openSession(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        UserMapper userMapper=sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        User user=userMapper.select(username,password);</span><br><span class="line">        <span class="comment">//调用完SQL就可以关闭了</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">        System.out.println(<span class="string">&quot;username:&quot;</span>+username);</span><br><span class="line">        System.out.println(<span class="string">&quot;password:&quot;</span>+password);</span><br><span class="line">        <span class="keyword">if</span>(user==<span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;密码错误！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;登录成功！！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;post!&quot;</span>);</span><br><span class="line">        doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="seervlet下的RegisterServlet-java"><a href="#seervlet下的RegisterServlet-java" class="headerlink" title="seervlet下的RegisterServlet.java"></a>seervlet下的RegisterServlet.java</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hello.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.hello.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.hello.utils.Getfactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/register&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RegisterServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;先获取用户填写的信息&quot;</span>);</span><br><span class="line">        resp.setHeader(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        String username=req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String password=req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        String resource = &quot;mybatis-config.xml&quot;;</span></span><br><span class="line"><span class="comment">//        InputStream inputStream = Resources.getResourceAsStream(resource);</span></span><br><span class="line"><span class="comment">//        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        //获取Sqlsussion对象</span></span><br><span class="line"><span class="comment">//        SqlSession sqlSession=sqlSessionFactory.openSession(true);</span></span><br><span class="line">        SqlSession sqlSession= Getfactory.getsqlsessionfactory().openSession(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        UserMapper userMapper=sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="comment">//检查是否已经有这个用户了</span></span><br><span class="line">        User user=userMapper.select(username,password);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(user==<span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//没有这个用户就创建这个用户</span></span><br><span class="line">            userMapper.adduser(username,password);</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;创建成功！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//注册失败！</span></span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;已经有这个账户拉&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="login-html"><a href="#login-html" class="headerlink" title="login.html"></a>login.html</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Login Page<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: Arial, sans-serif;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#f4f4f4</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.login-container</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">max-width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">input</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">button</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#4caf50</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#45a049</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#4caf50</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;loginForm&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/untitled23_war/login&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>Username:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;password&quot;</span>&gt;</span>Password:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>Reset<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Don&#x27;t have an account? <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;register.html&quot;</span>&gt;</span>Register<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="regiser-html"><a href="#regiser-html" class="headerlink" title="regiser.html"></a>regiser.html</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Register Page<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: Arial, sans-serif;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#f4f4f4</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.register-container</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">max-width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">input</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">button</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#4caf50</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#45a049</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;register-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Register<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;registerForm&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/untitled23_war/register&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>Username:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;password&quot;</span>&gt;</span>Password:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>Register<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>Reset<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Already have an account? <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;login.html&quot;</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="brand-jsp"><a href="#brand-jsp" class="headerlink" title="brand.jsp"></a>brand.jsp</h4><figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;%@ taglib uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> prefix=<span class="string">&quot;c&quot;</span> %&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;Brand List&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        table &#123;</span><br><span class="line">            border-collapse: collapse;</span><br><span class="line">            width: <span class="number">80</span>%;</span><br><span class="line">            margin: 20px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        th, td &#123;</span><br><span class="line">            border: 1px solid #dddddd;</span><br><span class="line">            text-align: left;</span><br><span class="line">            padding: 8px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        th &#123;</span><br><span class="line">            background-color: #f2f2f2;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;h2&gt;Brand List&lt;/h2&gt;</span><br><span class="line">&lt;input type=<span class="string">&quot;button&quot;</span> id=<span class="string">&quot;add&quot;</span> value=<span class="string">&quot;添加&quot;</span>&gt;</span><br><span class="line">&lt;table&gt;</span><br><span class="line">    &lt;thead&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;ID&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;Name&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;Company Name&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;Ordered&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;Description&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;Status&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;状态&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;操作&lt;/th&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;/thead&gt;</span><br><span class="line">    &lt;tbody&gt;</span><br><span class="line">    &lt;c:forEach <span class="keyword">var</span>=<span class="string">&quot;brand&quot;</span> items=<span class="string">&quot;$&#123;brands&#125;&quot;</span> varStatus=<span class="string">&quot;status&quot;</span>&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td&gt;$&#123;status.count&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;$&#123;brand.rand_name&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;$&#123;brand.company_name&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;$&#123;brand.ordered&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;$&#123;brand.description&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;$&#123;brand.status&#125;&lt;/td&gt;</span><br><span class="line">            &lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;brand.status==1&#125;&quot;</span>&gt;</span><br><span class="line">                &lt;td&gt;启用&lt;/td&gt;</span><br><span class="line">            &lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">            &lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;brand.status!=1&#125;&quot;</span>&gt;</span><br><span class="line">                &lt;td&gt; 禁用&lt;/td&gt;</span><br><span class="line">            &lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">            &lt;td&gt;&lt;a href=<span class="string">&quot;/untitled23_war/selectById?id=$&#123;brand.id&#125;&quot;</span>&gt;修改&lt;/a&gt; &lt;a href=<span class="string">&quot;#&quot;</span>&gt;删除&lt;/a&gt;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">    &lt;/c:forEach&gt;</span><br><span class="line">    &lt;/tbody&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    document.getElementById(<span class="string">&quot;add&quot;</span>).onclick=function ()&#123;</span><br><span class="line">        location.href=<span class="string">&quot;/untitled23_war/add.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="update-jsp"><a href="#update-jsp" class="headerlink" title="update.jsp"></a>update.jsp</h4><figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;Add Brand&lt;/title&gt;</span><br><span class="line">    &lt;!-- 引入Bootstrap样式文件，确保文件路径正确 --&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css&quot;</span>&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        body &#123;</span><br><span class="line">            padding: 20px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        form &#123;</span><br><span class="line">            max-width: 400px;</span><br><span class="line">            margin: <span class="number">0</span> auto;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        label &#123;</span><br><span class="line">            margin-bottom: <span class="number">0.</span>5rem;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        textarea &#123;</span><br><span class="line">            resize: vertical;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;div class=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">    &lt;h2 class=<span class="string">&quot;mt-4&quot;</span>&gt;Add Brand&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">    &lt;form action=<span class="string">&quot;/anli_war/update&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">&lt;%--        隐藏域--%&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;id&quot;</span> value=<span class="string">&quot;$&#123;brand.id&#125;&quot;</span>&gt;</span><br><span class="line">        &lt;div class=<span class="string">&quot;form-group&quot;</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">&quot;randName&quot;</span>&gt;Brand Name:&lt;/label&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;text&quot;</span> class=<span class="string">&quot;form-control&quot;</span> id=<span class="string">&quot;randName&quot;</span> name=<span class="string">&quot;rand_name&quot;</span> required value=<span class="string">&quot;$&#123;brand.rand_name&#125;&quot;</span>&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=<span class="string">&quot;form-group&quot;</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">&quot;companyName&quot;</span>&gt;Company Name:&lt;/label&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;text&quot;</span> class=<span class="string">&quot;form-control&quot;</span> id=<span class="string">&quot;companyName&quot;</span> name=<span class="string">&quot;company_name&quot;</span> required value=<span class="string">&quot;$&#123;brand.company_name&#125;&quot;</span>&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=<span class="string">&quot;form-group&quot;</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">&quot;ordered&quot;</span>&gt;Ordered:&lt;/label&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;number&quot;</span> class=<span class="string">&quot;form-control&quot;</span> id=<span class="string">&quot;ordered&quot;</span> name=<span class="string">&quot;ordered&quot;</span> required value=<span class="string">&quot;$&#123;brand.ordered&#125;&quot;</span>&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=<span class="string">&quot;form-group&quot;</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">&quot;description&quot;</span>&gt;Description:&lt;/label&gt;</span><br><span class="line">            &lt;textarea class=<span class="string">&quot;form-control&quot;</span> id=<span class="string">&quot;description&quot;</span> name=<span class="string">&quot;description&quot;</span> rows=<span class="string">&quot;4&quot;</span> required&gt;</span><br><span class="line">                $&#123;brand.description&#125;</span><br><span class="line">            &lt;/textarea&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=<span class="string">&quot;form-group&quot;</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">&quot;status&quot;</span>&gt;Status:&lt;/label&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;number&quot;</span> class=<span class="string">&quot;form-control&quot;</span> id=<span class="string">&quot;status&quot;</span> name=<span class="string">&quot;status&quot;</span> required&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;button type=<span class="string">&quot;submit&quot;</span> class=<span class="string">&quot;btn btn-primary&quot;</span>&gt;Add Brand&lt;/button&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 引入Bootstrap的JavaScript文件，确保文件路径正确 --&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://code.jquery.com/jquery-3.2.1.slim.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="add-jsp"><a href="#add-jsp" class="headerlink" title="add.jsp"></a>add.jsp</h4><figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;Add Brand&lt;/title&gt;</span><br><span class="line">    &lt;!-- 引入Bootstrap样式文件，确保文件路径正确 --&gt;</span><br><span class="line">    &lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css&quot;</span>&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        body &#123;</span><br><span class="line">            padding: 20px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        form &#123;</span><br><span class="line">            max-width: 400px;</span><br><span class="line">            margin: <span class="number">0</span> auto;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        label &#123;</span><br><span class="line">            margin-bottom: <span class="number">0.</span>5rem;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        textarea &#123;</span><br><span class="line">            resize: vertical;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;div class=<span class="string">&quot;container&quot;</span>&gt;</span><br><span class="line">    &lt;h2 class=<span class="string">&quot;mt-4&quot;</span>&gt;Add Brand&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">    &lt;form action=<span class="string">&quot;/untitled23_war/add&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        &lt;div class=<span class="string">&quot;form-group&quot;</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">&quot;randName&quot;</span>&gt;Brand Name:&lt;/label&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;text&quot;</span> class=<span class="string">&quot;form-control&quot;</span> id=<span class="string">&quot;randName&quot;</span> name=<span class="string">&quot;rand_name&quot;</span> required&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=<span class="string">&quot;form-group&quot;</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">&quot;companyName&quot;</span>&gt;Company Name:&lt;/label&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;text&quot;</span> class=<span class="string">&quot;form-control&quot;</span> id=<span class="string">&quot;companyName&quot;</span> name=<span class="string">&quot;company_name&quot;</span> required&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=<span class="string">&quot;form-group&quot;</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">&quot;ordered&quot;</span>&gt;Ordered:&lt;/label&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;number&quot;</span> class=<span class="string">&quot;form-control&quot;</span> id=<span class="string">&quot;ordered&quot;</span> name=<span class="string">&quot;ordered&quot;</span> required&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=<span class="string">&quot;form-group&quot;</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">&quot;description&quot;</span>&gt;Description:&lt;/label&gt;</span><br><span class="line">            &lt;textarea class=<span class="string">&quot;form-control&quot;</span> id=<span class="string">&quot;description&quot;</span> name=<span class="string">&quot;description&quot;</span> rows=<span class="string">&quot;4&quot;</span> required&gt;&lt;/textarea&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div class=<span class="string">&quot;form-group&quot;</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">&quot;status&quot;</span>&gt;Status:&lt;/label&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;number&quot;</span> class=<span class="string">&quot;form-control&quot;</span> id=<span class="string">&quot;status&quot;</span> name=<span class="string">&quot;status&quot;</span> required&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;button type=<span class="string">&quot;submit&quot;</span> class=<span class="string">&quot;btn btn-primary&quot;</span>&gt;Add Brand&lt;/button&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 引入Bootstrap的JavaScript文件，确保文件路径正确 --&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://code.jquery.com/jquery-3.2.1.slim.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=<span class="string">&quot;https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="utils下的Getfactory-java"><a href="#utils下的Getfactory-java" class="headerlink" title="utils下的Getfactory.java"></a>utils下的Getfactory.java</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Getfactory</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        sqlSessionFactory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSessionFactory <span class="title function_">getsqlsessionfactory</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  sqlSessionFactory;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>现在可以实现之前的简单登录和注册</p>
<img src="/post/6880b471/image-20240130165614172.png" class="" title="image-20240130165614172"> 

<img src="/post/6880b471/image-20240130165617008.png" class="" title="image-20240130165617008"> 

<p>通常情况下，资源间转发用于普通的数据传输，而会话转发用于对网络流量进行安全检查和管理。</p>
<h3 id="Request请求转发"><a href="#Request请求转发" class="headerlink" title="Request请求转发"></a><a target="_blank" rel="noopener" href="https://xu-runbo.gitee.io/xu-runbo/post/e770816f.html?highlight=request#Request%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91">Request请求转发</a></h3><p><a target="_blank" rel="noopener" href="https://xu-runbo.gitee.io/xu-runbo/post/e770816f.html?highlight=request#Request%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91">Request请求转发</a></p>
<h3 id="JSTL标签"><a href="#JSTL标签" class="headerlink" title="JSTL标签"></a>JSTL标签</h3><p><a target="_blank" rel="noopener" href="https://xu-runbo.gitee.io/xu-runbo/post/681c540e.html?highlight=jstl#EL%E8%A1%A8%E8%BE%BE%E5%BC%8F">JSTL标签</a></p>
<h3 id="用户登录"><a href="#用户登录" class="headerlink" title="用户登录"></a>用户登录</h3><h4 id="实现XXX用户欢迎"><a href="#实现XXX用户欢迎" class="headerlink" title="实现XXX用户欢迎"></a>实现XXX用户欢迎</h4><img src="/post/6880b471/image-20240130204506603.png" class="" title="image-20240130204506603"> 

<p>我们想要在登录后的 页面显示是谁登录了</p>
<p>XXX欢迎你！</p>
<p>登录成功是一个servlet</p>
<p>接下来我们重定向到新的servlet</p>
<p>不同的servlet之间共享信息</p>
<p>一次会话的两次请求之间，我们要共享信息</p>
<h4 id="LoginServlet-java"><a href="#LoginServlet-java" class="headerlink" title="LoginServlet.java"></a>LoginServlet.java</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.servlet;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hello.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.hello.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.hello.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.hello.utils.Getfactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/login&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UserService userService=<span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;先获取信息&quot;</span>);</span><br><span class="line">        resp.setHeader(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        String username=req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String password=req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//        优化为</span></span><br><span class="line">        User user=userService.login(username,password);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(user==<span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;密码错误！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;登录成功！！&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// --------------------------------------------</span></span><br><span class="line">            <span class="comment">//登陆成功后我们把用户的信息传递给session</span></span><br><span class="line">            HttpSession httpSession=req.getSession();</span><br><span class="line">            httpSession.setAttribute(<span class="string">&quot;user&quot;</span>,user);</span><br><span class="line">           <span class="comment">// --------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            String contextPath=req.getContextPath();</span><br><span class="line">            resp.sendRedirect(contextPath+<span class="string">&quot;/selectall&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;post!&quot;</span>);</span><br><span class="line">        doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="brand-jsp-1"><a href="#brand-jsp-1" class="headerlink" title="brand.jsp"></a>brand.jsp</h4><img src="/post/6880b471/image-20240130171307791.png" class="" title="image-20240130171307791"> 

<p>就可以实现不同用户登陆显示不同</p>
<img src="/post/6880b471/image-20240130201431620.png" class="" title="image-20240130201431620"> 





<h4 id="session和req域"><a href="#session和req域" class="headerlink" title="session和req域"></a>session和req域</h4><p>Session和存入req域<strong>都是用来在不同的Servlet之间传递数据</strong>的方式。但它们有一些不同之处：</p>
<ol>
<li><p>生命周期：<strong>Session的生命周期是整个会话期间</strong>，而存入<strong>req域的数据只在请求处理期间有效</strong>。</p>
</li>
<li><p>共享范围：<strong>Session可以在不同的Servlet之间共享数据</strong>，而存入req域的数据<strong>只能在当前请求的处理期间共享。</strong></p>
</li>
</ol>
<p>当在一个Servlet中将数据存入Session或者req域中，这些数据会被保存在服务器端，然后在跳转到另一个Servlet时，可以通过Session或者req域来获取之前存入的数据。</p>
<h4 id="提示错误信息"><a href="#提示错误信息" class="headerlink" title="提示错误信息"></a>提示错误信息</h4><p>实现，当用户密码不匹配的时候提示一下</p>
<p>因为要用到el表达式，我们把html修改为jsp</p>
<p>只需要前面加上这两句</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">防止乱码</span><br><span class="line">&lt;%@ taglib uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> prefix=<span class="string">&quot;c&quot;</span> %&gt;</span><br></pre></td></tr></table></figure>

<p>login.jsp</p>
<img src="/post/6880b471/image-20240130204526328.png" class="" title="image-20240130204526328"> 

<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;$&#123;not empty login_msg&#125;&quot;</span>&gt;</span><br><span class="line">    &lt;h3 style=<span class="string">&quot;color: red;&quot;</span>&gt;$&#123;login_msg&#125;&lt;/h3&gt;</span><br><span class="line">&lt;/c:<span class="keyword">if</span>&gt;</span><br></pre></td></tr></table></figure>



<p>现在的loginservlet.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.servlet;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hello.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.hello.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.hello.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.hello.utils.Getfactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/login&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UserService userService=<span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;先获取信息&quot;</span>);</span><br><span class="line">        resp.setHeader(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        String username=req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String password=req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//        优化为</span></span><br><span class="line">        User user=userService.login(username,password);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(user==<span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;密码错误！&quot;</span>);</span><br><span class="line">            </span><br><span class="line">            </span><br><span class="line">            <span class="comment">//------------------------------------</span></span><br><span class="line">            <span class="comment">//存入req域</span></span><br><span class="line">            req.setAttribute(<span class="string">&quot;login_msg&quot;</span>,<span class="string">&quot;用户密码不匹配&quot;</span>);</span><br><span class="line">            <span class="comment">//请求转发</span></span><br><span class="line">            req.getRequestDispatcher(<span class="string">&quot;/login.jsp&quot;</span>).forward(req,resp);</span><br><span class="line">            <span class="comment">//------------------------------------ </span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;登录成功！！&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">//登陆成功后我们把用户的信息传递给session</span></span><br><span class="line">            HttpSession httpSession=req.getSession();</span><br><span class="line">            httpSession.setAttribute(<span class="string">&quot;user&quot;</span>,user);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            String contextPath=req.getContextPath();</span><br><span class="line">            resp.sendRedirect(contextPath+<span class="string">&quot;/selectall&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;post!&quot;</span>);</span><br><span class="line">        doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h3 id="记住用户"><a href="#记住用户" class="headerlink" title="记住用户"></a>记住用户</h3><img src="/post/6880b471/image-20240130205218451.png" class="" title="image-20240130205218451"> 



<hr>
<img src="/post/6880b471/image-20240130205255711.png" class="" title="image-20240130205255711"> 

<h4 id="login-jsp"><a href="#login-jsp" class="headerlink" title="login.jsp"></a>login.jsp</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Login Page<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: Arial, sans-serif;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#f4f4f4</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.login-container</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">max-width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">input</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">8px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">button</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#4caf50</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#45a049</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#4caf50</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span> <span class="attr">style</span>=<span class="string">&quot;color: red;&quot;</span>&gt;</span>用户密码不匹配<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;loginForm&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/untitled23_war/login&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>Username:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;password&quot;</span>&gt;</span>Password:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;%--////////////////////////////////////////////////////////////--%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 10px;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;rememberMe&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin: 0;&quot;</span>&gt;</span>rememberMe<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;rememberMe&quot;</span> <span class="attr">name</span>=<span class="string">&quot;remember&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display:inline; width: 20px; margin: 0;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    &lt;%--////////////////////////////////////////////////////////////--%&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span>&gt;</span>Reset<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Don&#x27;t have an account? <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;register.html&quot;</span>&gt;</span>Register<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>说明，我们等下根据getparmater来获取到复选框的值来判断是否被选中</p>
<p>获取到的remember的值是1说明被选中了</p>
<blockquote>
<p>定义了一个复选框元素。</p>
<p>它有一个id属性为”rememberMe”，name属性为”remember”，以及一个value属性为”1”。</p>
<p>当用户勾选了这个复选框后，我们可以使用JavaScript或者<strong>后端的Java代码</strong>来获<strong>取这个复选框的值</strong>。</p>
<p>在后端的Java代码中，我们可以使用request.getParameter(“remember”)来获取复选框的值。如果复选框被选中，那么返回的值就是”1”；如果没有被选中，那么返回的值就是null。</p>
</blockquote>
<blockquote>
<p>这种前后端的交互方式可以用于用户提交表单时，后端根据用户的输入来做出相应的处理，比如保存用户的选择或者进行其他操作。</p>
</blockquote>
<h4 id="细节"><a href="#细节" class="headerlink" title="细节"></a>细节</h4><p><code>if(&quot;1&quot;.equals(checkvalue))</code>是在检查<code>checkvalue</code>的值是否等于字符串”1”。</p>
<p>如果<code>checkvalue</code>是null或空的话，调用它的<code>equals</code>方法</p>
<p>也就是<code>if(checkvalue.equals(&quot;1&quot;))</code></p>
<p>会导致<code>NullPointerException</code>。通过确保在进行比较之前<code>checkvalue</code>不为null或空，可以避免这个潜在问题。</p>
<p>注释强调了处理<code>checkvalue</code>可能为null或空值的重要性，作为代码设计中的细节。这有助于确保代码按预期方式运行，并避免意外错误。 </p>
<p>所以，让前者为字符串常量好啊啊啊啊</p>
<h4 id="改造loginservlet"><a href="#改造loginservlet" class="headerlink" title="改造loginservlet"></a>改造loginservlet</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.servlet;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hello.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.hello.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.hello.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.hello.utils.Getfactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/login&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> UserService userService=<span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;先获取信息&quot;</span>);</span><br><span class="line">        resp.setHeader(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        String username=req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String password=req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"><span class="comment">//---------------------------------------------------------------------------------</span></span><br><span class="line">        <span class="comment">//获取我们前端传来的东西</span></span><br><span class="line">        String checkvalue=req.getParameter(<span class="string">&quot;remember&quot;</span>);</span><br><span class="line"><span class="comment">//---------------------------------------------------------------------------------        </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//        优化为</span></span><br><span class="line">        User user=userService.login(username,password);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(user==<span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;密码错误！&quot;</span>);</span><br><span class="line">            <span class="comment">//存入req域</span></span><br><span class="line">            req.setAttribute(<span class="string">&quot;login_msg&quot;</span>,<span class="string">&quot;用户密码不匹配&quot;</span>);</span><br><span class="line">            <span class="comment">//请求转发</span></span><br><span class="line">            req.getRequestDispatcher(<span class="string">&quot;/login.jsp&quot;</span>).forward(req,resp);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            resp.getWriter().write(<span class="string">&quot;登录成功！！&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//登录成功且勾选了复选框</span></span><br><span class="line">            </span><br><span class="line"> <span class="comment">//---------------------------------------------------------------------------------</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;1&quot;</span>.equals(checkvalue))<span class="comment">//细节在于，前这一直不为空，可以避免一些问题</span></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//发送cookie</span></span><br><span class="line">                Cookie username_cookie=<span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;username&quot;</span>,username);</span><br><span class="line">                Cookie password_cookie=<span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;password&quot;</span>,password);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                username_cookie.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>);</span><br><span class="line">                password_cookie.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>);</span><br><span class="line"></span><br><span class="line">                resp.addCookie(username_cookie);</span><br><span class="line">                resp.addCookie(password_cookie);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//---------------------------------------------------------------------------------</span></span><br><span class="line">            <span class="comment">//登陆成功后我们把用户的信息传递给session</span></span><br><span class="line">            HttpSession httpSession=req.getSession();</span><br><span class="line">            httpSession.setAttribute(<span class="string">&quot;user&quot;</span>,user);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            String contextPath=req.getContextPath();</span><br><span class="line">            resp.sendRedirect(contextPath+<span class="string">&quot;/selectall&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;post!&quot;</span>);</span><br><span class="line">        doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>当登陆成功而且还选中了复选框</p>
<p>F12检索就可以看到</p>
<p>服务端拿到了密码和账户，并且发送了cookie</p>
<img src="/post/6880b471/image-20240130212434292.png" class="" title="image-20240130212434292"> 



<hr>
<p>把cookie存储在我们的浏览器</p>
<p>以后的访问就会带着cookie头去请求</p>
<img src="/post/6880b471/image-20240130212841277.png" class="" title="image-20240130212841277"> 





<h4 id="获取cookie数据"><a href="#获取cookie数据" class="headerlink" title="获取cookie数据"></a>获取cookie数据</h4><img src="/post/6880b471/image-20240130213015281.png" class="" title="image-20240130213015281"> 

<p>以后既然都携带cookie了，那我们在前端页面用cookie里的数据填充就好了！</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;Login Page&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        body &#123;</span><br><span class="line">            font-family: Arial, sans-serif;</span><br><span class="line">            background-color: #f4f4f4;</span><br><span class="line">            text-align: center;</span><br><span class="line">            margin: 100px;</span><br><span class="line">        &#125;</span><br><span class="line">        .login-container &#123;</span><br><span class="line">            max-width: 400px;</span><br><span class="line">            margin: auto;</span><br><span class="line">            background: #fff;</span><br><span class="line">            padding: 20px;</span><br><span class="line">            border-radius: 8px;</span><br><span class="line">            box-shadow: <span class="number">0</span> <span class="number">0</span> 10px <span class="title function_">rgba</span><span class="params">(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>)</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        input &#123;</span><br><span class="line">            width: <span class="number">100</span>%;</span><br><span class="line">            padding: 10px;</span><br><span class="line">            margin: 8px <span class="number">0</span>;</span><br><span class="line">            box-sizing: border-box;</span><br><span class="line">        &#125;</span><br><span class="line">        button &#123;</span><br><span class="line">            background-color: #4caf50;</span><br><span class="line">            color: #fff;</span><br><span class="line">            padding: 10px 15px;</span><br><span class="line">            border: none;</span><br><span class="line">            border-radius: 4px;</span><br><span class="line">            cursor: pointer;</span><br><span class="line">        &#125;</span><br><span class="line">        button:hover &#123;</span><br><span class="line">            background-color: #45a049;</span><br><span class="line">        &#125;</span><br><span class="line">        a &#123;</span><br><span class="line">            text-decoration: none;</span><br><span class="line">            color: #4caf50;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class=<span class="string">&quot;login-container&quot;</span>&gt;</span><br><span class="line">    &lt;h2&gt;Login&lt;/h2&gt;</span><br><span class="line">    &lt;h3 style=<span class="string">&quot;color: red;&quot;</span>&gt;用户密码不匹配&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;form id=<span class="string">&quot;loginForm&quot;</span> action=<span class="string">&quot;/untitled23_war/login&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        &lt;label <span class="keyword">for</span>=<span class="string">&quot;username&quot;</span>&gt;Username:&lt;/label&gt;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        &lt;%-----------------------------------------------------------------------%&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;text&quot;</span> id=<span class="string">&quot;username&quot;</span> name=<span class="string">&quot;username&quot;</span> required value=<span class="string">&quot;$&#123;cookie.username.value&#125;&quot;</span>&gt;</span><br><span class="line">        &lt;%-----------------------------------------------------------------------%&gt;</span><br><span class="line"></span><br><span class="line">        &lt;label <span class="keyword">for</span>=<span class="string">&quot;password&quot;</span>&gt;Password:&lt;/label&gt;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        &lt;%-----------------------------------------------------------------------%&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;password&quot;</span> id=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span> required value=<span class="string">&quot;$&#123;cookie.password.value&#125;&quot;</span>&gt;</span><br><span class="line">        &lt;%-----------------------------------------------------------------------%&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &lt;div style=<span class="string">&quot;margin-bottom: 10px;&quot;</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">&quot;rememberMe&quot;</span> style=<span class="string">&quot;margin: 0;&quot;</span>&gt;rememberMe&lt;/label&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;checkbox&quot;</span> id=<span class="string">&quot;rememberMe&quot;</span> name=<span class="string">&quot;remember&quot;</span> value=<span class="string">&quot;1&quot;</span> style=<span class="string">&quot;display:inline; width: 20px; margin: 0;&quot;</span>&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &lt;button type=<span class="string">&quot;submit&quot;</span>&gt;Login&lt;/button&gt;</span><br><span class="line">        &lt;button type=<span class="string">&quot;reset&quot;</span>&gt;Reset&lt;/button&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">    &lt;p&gt;Don<span class="string">&#x27;t have an account? &lt;a href=&quot;register.html&quot;&gt;Register&lt;/a&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>





<h4 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h4><p>google没有自动填补，edge自动填补</p>
<img src="/post/6880b471/PixPin01-30_21-38-10.gif" class="" title="PixPin01-30_21-38-10">





<h3 id="注册案例"><a href="#注册案例" class="headerlink" title="注册案例"></a>注册案例</h3><img src="/post/6880b471/image-20240130214135304.png" class="" title="image-20240130214135304"> 

<img src="/post/6880b471/image-20240130214126843.png" class="" title="image-20240130214126843"> 



<h4 id="UserService-java添加registter方法，优化"><a href="#UserService-java添加registter方法，优化" class="headerlink" title="UserService.java添加registter方法，优化"></a>UserService.java添加registter方法，优化</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hello.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.hello.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.hello.utils.Getfactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> SqlSessionFactory factory= Getfactory.getsqlsessionfactory();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">login</span><span class="params">(String username,String password)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//获取sqlsession</span></span><br><span class="line">        SqlSession sqlSession=factory.openSession(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">//获取usermapper</span></span><br><span class="line">        UserMapper userMapper=sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="comment">//执行方法</span></span><br><span class="line">        User user=userMapper.select(username,password);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//释放资源</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">register</span><span class="params">(String username,String password)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//获取sqlsession</span></span><br><span class="line">        SqlSession sqlSession=factory.openSession(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">//获取usermapper</span></span><br><span class="line">        UserMapper userMapper=sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="comment">//执行方法检查是否重复</span></span><br><span class="line">        User user=userMapper.select(username,password);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(user== <span class="literal">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            userMapper.adduser(username,password);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//释放资源</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">        <span class="keyword">return</span> user == <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="registerServlet-java修改"><a href="#registerServlet-java修改" class="headerlink" title="registerServlet.java修改"></a>registerServlet.java修改</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hello.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hello.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.hello.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.hello.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.hello.utils.Getfactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/register&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RegisterServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> UserService userService=<span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;先获取用户填写的信息&quot;</span>);</span><br><span class="line">        resp.setHeader(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取用户信息</span></span><br><span class="line">        String username=req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String password=req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">boolean</span> flag=userService.register(username,password);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(flag)</span><br><span class="line">        &#123;</span><br><span class="line">            req.setAttribute(<span class="string">&quot;register_msg&quot;</span>,<span class="string">&quot;注册成功，请登录&quot;</span>);</span><br><span class="line">            req.getRequestDispatcher(<span class="string">&quot;/login.jsp&quot;</span>).forward(req,resp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            req.setAttribute(<span class="string">&quot;register_msg&quot;</span>,<span class="string">&quot;用户名已经存在&quot;</span>);</span><br><span class="line">            req.getRequestDispatcher(<span class="string">&quot;/register.jsp&quot;</span>).forward(req,resp);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h4 id="regiset-jsp"><a href="#regiset-jsp" class="headerlink" title="regiset.jsp"></a>regiset.jsp</h4><figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;Register Page&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        body &#123;</span><br><span class="line">            font-family: Arial, sans-serif;</span><br><span class="line">            background-color: #f4f4f4;</span><br><span class="line">            text-align: center;</span><br><span class="line">            margin: 100px;</span><br><span class="line">        &#125;</span><br><span class="line">        .register-container &#123;</span><br><span class="line">            max-width: 400px;</span><br><span class="line">            margin: auto;</span><br><span class="line">            background: #fff;</span><br><span class="line">            padding: 20px;</span><br><span class="line">            border-radius: 8px;</span><br><span class="line">            box-shadow: <span class="number">0</span> <span class="number">0</span> 10px <span class="title function_">rgba</span><span class="params">(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>)</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        input &#123;</span><br><span class="line">            width: <span class="number">100</span>%;</span><br><span class="line">            padding: 10px;</span><br><span class="line">            margin: 8px <span class="number">0</span>;</span><br><span class="line">            box-sizing: border-box;</span><br><span class="line">        &#125;</span><br><span class="line">        button &#123;</span><br><span class="line">            background-color: #4caf50;</span><br><span class="line">            color: #fff;</span><br><span class="line">            padding: 10px 15px;</span><br><span class="line">            border: none;</span><br><span class="line">            border-radius: 4px;</span><br><span class="line">            cursor: pointer;</span><br><span class="line">        &#125;</span><br><span class="line">        button:hover &#123;</span><br><span class="line">            background-color: #45a049;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class=<span class="string">&quot;register-container&quot;</span>&gt;</span><br><span class="line">    &lt;h2&gt;Register&lt;/h2&gt;</span><br><span class="line">    &lt;form id=<span class="string">&quot;registerForm&quot;</span> action=<span class="string">&quot;/untitled23_war/register&quot;</span>&gt;</span><br><span class="line">        &lt;label <span class="keyword">for</span>=<span class="string">&quot;username&quot;</span>&gt;Username:&lt;/label&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;text&quot;</span> id=<span class="string">&quot;username&quot;</span> name=<span class="string">&quot;username&quot;</span> required&gt;</span><br><span class="line"></span><br><span class="line">        &lt;label <span class="keyword">for</span>=<span class="string">&quot;password&quot;</span>&gt;Password:&lt;/label&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;password&quot;</span> id=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span> required&gt;</span><br><span class="line"></span><br><span class="line">        &lt;p&gt;$&#123;register_msg&#125;&lt;/p&gt;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;button type=<span class="string">&quot;submit&quot;</span>&gt;Register&lt;/button&gt;</span><br><span class="line">        &lt;button type=<span class="string">&quot;reset&quot;</span>&gt;Reset&lt;/button&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    &lt;p&gt;Already have an account? &lt;a href=<span class="string">&quot;login.jsp&quot;</span>&gt;Login&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>









<h4 id="login-jsp-1"><a href="#login-jsp-1" class="headerlink" title="login.jsp"></a>login.jsp</h4><figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=UTF-8&quot;</span> pageEncoding=<span class="string">&quot;UTF-8&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;Login Page&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        body &#123;</span><br><span class="line">            font-family: Arial, sans-serif;</span><br><span class="line">            background-color: #f4f4f4;</span><br><span class="line">            text-align: center;</span><br><span class="line">            margin: 100px;</span><br><span class="line">        &#125;</span><br><span class="line">        .login-container &#123;</span><br><span class="line">            max-width: 400px;</span><br><span class="line">            margin: auto;</span><br><span class="line">            background: #fff;</span><br><span class="line">            padding: 20px;</span><br><span class="line">            border-radius: 8px;</span><br><span class="line">            box-shadow: <span class="number">0</span> <span class="number">0</span> 10px <span class="title function_">rgba</span><span class="params">(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>)</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        input &#123;</span><br><span class="line">            width: <span class="number">100</span>%;</span><br><span class="line">            padding: 10px;</span><br><span class="line">            margin: 8px <span class="number">0</span>;</span><br><span class="line">            box-sizing: border-box;</span><br><span class="line">        &#125;</span><br><span class="line">        button &#123;</span><br><span class="line">            background-color: #4caf50;</span><br><span class="line">            color: #fff;</span><br><span class="line">            padding: 10px 15px;</span><br><span class="line">            border: none;</span><br><span class="line">            border-radius: 4px;</span><br><span class="line">            cursor: pointer;</span><br><span class="line">        &#125;</span><br><span class="line">        button:hover &#123;</span><br><span class="line">            background-color: #45a049;</span><br><span class="line">        &#125;</span><br><span class="line">        a &#123;</span><br><span class="line">            text-decoration: none;</span><br><span class="line">            color: #4caf50;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class=<span class="string">&quot;login-container&quot;</span>&gt;</span><br><span class="line">    &lt;h2&gt;Login&lt;/h2&gt;</span><br><span class="line">    &lt;h3 style=<span class="string">&quot;color: red;&quot;</span>&gt;$&#123;login_msg&#125; $&#123;register_msg&#125;&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;form id=<span class="string">&quot;loginForm&quot;</span> action=<span class="string">&quot;/untitled23_war/login&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">        &lt;label <span class="keyword">for</span>=<span class="string">&quot;username&quot;</span>&gt;Username:&lt;/label&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;text&quot;</span> id=<span class="string">&quot;username&quot;</span> name=<span class="string">&quot;username&quot;</span> required value=<span class="string">&quot;$&#123;cookie.username.value&#125;&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;label <span class="keyword">for</span>=<span class="string">&quot;password&quot;</span>&gt;Password:&lt;/label&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;password&quot;</span> id=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;password&quot;</span> required value=<span class="string">&quot;$&#123;cookie.password.value&#125;&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div style=<span class="string">&quot;margin-bottom: 10px;&quot;</span>&gt;</span><br><span class="line">            &lt;label <span class="keyword">for</span>=<span class="string">&quot;rememberMe&quot;</span> style=<span class="string">&quot;margin: 0;&quot;</span>&gt;rememberMe&lt;/label&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;checkbox&quot;</span> id=<span class="string">&quot;rememberMe&quot;</span> name=<span class="string">&quot;remember&quot;</span> value=<span class="string">&quot;1&quot;</span> style=<span class="string">&quot;display:inline; width: 20px; margin: 0;&quot;</span>&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &lt;button type=<span class="string">&quot;submit&quot;</span>&gt;Login&lt;/button&gt;</span><br><span class="line">        &lt;button type=<span class="string">&quot;reset&quot;</span>&gt;Reset&lt;/button&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">    &lt;p&gt;Don<span class="string">&#x27;t have an account? &lt;a href=&quot;register.jsp&quot;&gt;Register&lt;/a&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>





<h4 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h4><img src="/post/6880b471/PixPin01-30_22-15-48.gif" class="" title="PixPin01-30_22-15-48">

<p>因为我们比对的是用户名和用户密码，也就是只有这俩都不一样的时候才是不一样</p>
<p>只有用户名一样密码不一样，也是可以创建的。</p>
<p>自行修改，。。。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://017328.xyz">下完这场雨</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://017328.xyz/post/6880b471.html">https://017328.xyz/post/6880b471.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://017328.xyz" target="_blank">cout<<"金缕衣";</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/cookie-session/">cookie,session</a></div><div class="post_share"><div class="social-share" data-image="/img/sky5.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wx.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wx.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/zfb.jpg" target="_blank"><img class="post-qr-code-img" src="/img/zfb.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/31fabe4c.html" title="过滤器Filter"><img class="cover" src="/img/sky8.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">过滤器Filter</div></div></a></div><div class="next-post pull-right"><a href="/post/6373a81a.html" title="数据结构绪论"><img class="cover" src="/img/b7.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">数据结构绪论</div></div></a></div></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Valine</span><span class="switch-btn"></span><span class="second-comment">Livere</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div><div><div id="lv-container" data-id="city" data-uid="MTAyMC81OTAyMS8zNTQ4Mw=="></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/h.gif" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">下完这场雨</div><div class="author-info__description">椿萱并茂，棠棣同馨，松萝共倚，兰桂齐芳。</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">63</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">33</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">24</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/666XRB"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/666XRB" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://blog.csdn.net/xideaha?spm=1000.2115.3001.5343" target="_blank" title="CSDN"><i class="fa fa-book-open"></i></a><a class="social-icon" href="https://user.qzone.qq.com/1982830095/infocenter" target="_blank" title="QQ"><i class="fab fa-qq"></i></a><a class="social-icon" href="mailto:1982830095@qq.com" target="_blank" title="Email"><i class="fas fa-envelope-open-text"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">这里啊，这里是我的blog，分享一些学习知识。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E8%BF%BD%E8%B8%AA%E6%8A%80%E6%9C%AF"><span class="toc-number">1.</span> <span class="toc-text">会话追踪技术</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D-%E4%BC%9A%E8%AF%9D%E8%B7%9F%E8%B8%AA"><span class="toc-number">1.1.</span> <span class="toc-text">会话&amp;会话跟踪</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E4%BF%97%E7%9A%84%E6%8F%8F%E8%BF%B0"><span class="toc-number">1.2.</span> <span class="toc-text">通俗的描述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E5%87%86%E5%A4%87"><span class="toc-number">1.3.</span> <span class="toc-text">学习准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cookie"><span class="toc-number">1.4.</span> <span class="toc-text">Cookie</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie%E7%9A%84%E8%A7%81%E8%A7%A3"><span class="toc-number">1.4.1.</span> <span class="toc-text">Cookie的见解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF%EF%BC%9A%E9%82%AE%E9%80%92%E5%91%98%E5%92%8C%E4%BF%A1%E4%BB%B6"><span class="toc-number">1.4.2.</span> <span class="toc-text">场景：邮递员和信件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.3.</span> <span class="toc-text">Cookie的基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%91%E9%80%81cookie"><span class="toc-number">1.4.4.</span> <span class="toc-text">发送cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96cookies"><span class="toc-number">1.4.5.</span> <span class="toc-text">获取cookies</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie%E5%8E%9F%E7%90%86"><span class="toc-number">1.4.6.</span> <span class="toc-text">Cookie原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E6%B5%8B%E8%AF%95"><span class="toc-number">1.4.6.1.</span> <span class="toc-text">&#x3D;&#x3D;方法测试&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Cookie%E5%AD%98%E5%82%A8%E4%B8%AD%E6%96%87"><span class="toc-number">1.4.6.2.</span> <span class="toc-text">Cookie存储中文</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E5%91%A2"><span class="toc-number">1.4.6.3.</span> <span class="toc-text">如何解决呢</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Session"><span class="toc-number">1.5.</span> <span class="toc-text">Session</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Session%E5%BC%95%E5%85%A5"><span class="toc-number">1.5.1.</span> <span class="toc-text">Session引入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Session%E6%A6%82%E5%BF%B5%E5%92%8C%E4%BD%9C%E7%94%A8"><span class="toc-number">1.5.1.1.</span> <span class="toc-text">Session概念和作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Seesion%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.5.1.2.</span> <span class="toc-text">Seesion的生命周期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%9A%E8%AF%9D%E6%A0%87%E8%AF%86%E7%AC%A6"><span class="toc-number">1.5.1.3.</span> <span class="toc-text">会话标识符</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Session%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">1.5.2.</span> <span class="toc-text">Session的基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Session%E5%8E%9F%E7%90%86"><span class="toc-number">1.5.3.</span> <span class="toc-text">Session原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Session%E4%BD%BF%E7%94%A8%E7%BB%86%E8%8A%82"><span class="toc-number">1.5.4.</span> <span class="toc-text">Session使用细节</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#session%E9%92%9D%E5%8C%96%EF%BC%8C%E6%B4%BB%E5%8C%96%EF%BC%9A"><span class="toc-number">1.5.4.1.</span> <span class="toc-text">session钝化，活化：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Session%E7%9A%84%E9%94%80%E6%AF%81"><span class="toc-number">1.5.4.2.</span> <span class="toc-text">Session的销毁</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.6.</span> <span class="toc-text">总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie%EF%BC%9A"><span class="toc-number">1.6.1.</span> <span class="toc-text">Cookie：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Session%EF%BC%9A"><span class="toc-number">1.6.2.</span> <span class="toc-text">Session：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cookie-%E5%92%8C-Session-%E7%9A%84%E5%85%B3%E7%B3%BB%EF%BC%9A"><span class="toc-number">1.6.3.</span> <span class="toc-text">Cookie 和 Session 的关系：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B"><span class="toc-number">1.7.</span> <span class="toc-text">综合案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E8%A6%81%E6%B1%82"><span class="toc-number">1.7.1.</span> <span class="toc-text">案例要求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#web%E6%A1%86%E6%9E%B6%E5%87%86%E5%A4%87"><span class="toc-number">1.7.2.</span> <span class="toc-text">web框架准备</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#pojo%E4%B8%8B%E7%9A%84User-java"><span class="toc-number">1.7.2.1.</span> <span class="toc-text">pojo下的User.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pojo%E4%B8%8B%E7%9A%84Brad-java"><span class="toc-number">1.7.2.2.</span> <span class="toc-text">pojo下的Brad.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#service%E4%B8%8B%E7%9A%84UserService-java"><span class="toc-number">1.7.2.3.</span> <span class="toc-text">service下的UserService.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mybatis-config-xml"><span class="toc-number">1.7.2.4.</span> <span class="toc-text">mybatis-config.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pom-xml"><span class="toc-number">1.7.2.5.</span> <span class="toc-text">pom.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#UserMapper%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.7.2.6.</span> <span class="toc-text">UserMapper接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#seervlet%E4%B8%8B%E7%9A%84LoginServlet-java"><span class="toc-number">1.7.2.7.</span> <span class="toc-text">seervlet下的LoginServlet.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#seervlet%E4%B8%8B%E7%9A%84RegisterServlet-java"><span class="toc-number">1.7.2.8.</span> <span class="toc-text">seervlet下的RegisterServlet.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#login-html"><span class="toc-number">1.7.2.9.</span> <span class="toc-text">login.html</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#regiser-html"><span class="toc-number">1.7.2.10.</span> <span class="toc-text">regiser.html</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#brand-jsp"><span class="toc-number">1.7.2.11.</span> <span class="toc-text">brand.jsp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#update-jsp"><span class="toc-number">1.7.2.12.</span> <span class="toc-text">update.jsp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#add-jsp"><span class="toc-number">1.7.2.13.</span> <span class="toc-text">add.jsp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#utils%E4%B8%8B%E7%9A%84Getfactory-java"><span class="toc-number">1.7.2.14.</span> <span class="toc-text">utils下的Getfactory.java</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Request%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91"><span class="toc-number">1.7.3.</span> <span class="toc-text">Request请求转发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSTL%E6%A0%87%E7%AD%BE"><span class="toc-number">1.7.4.</span> <span class="toc-text">JSTL标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95"><span class="toc-number">1.7.5.</span> <span class="toc-text">用户登录</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0XXX%E7%94%A8%E6%88%B7%E6%AC%A2%E8%BF%8E"><span class="toc-number">1.7.5.1.</span> <span class="toc-text">实现XXX用户欢迎</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#LoginServlet-java"><span class="toc-number">1.7.5.2.</span> <span class="toc-text">LoginServlet.java</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#brand-jsp-1"><span class="toc-number">1.7.5.3.</span> <span class="toc-text">brand.jsp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#session%E5%92%8Creq%E5%9F%9F"><span class="toc-number">1.7.5.4.</span> <span class="toc-text">session和req域</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%90%E7%A4%BA%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF"><span class="toc-number">1.7.5.5.</span> <span class="toc-text">提示错误信息</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B0%E4%BD%8F%E7%94%A8%E6%88%B7"><span class="toc-number">1.7.6.</span> <span class="toc-text">记住用户</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#login-jsp"><span class="toc-number">1.7.6.1.</span> <span class="toc-text">login.jsp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%86%E8%8A%82"><span class="toc-number">1.7.6.2.</span> <span class="toc-text">细节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B9%E9%80%A0loginservlet"><span class="toc-number">1.7.6.3.</span> <span class="toc-text">改造loginservlet</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96cookie%E6%95%B0%E6%8D%AE"><span class="toc-number">1.7.6.4.</span> <span class="toc-text">获取cookie数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%88%E6%9E%9C"><span class="toc-number">1.7.6.5.</span> <span class="toc-text">效果</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E5%86%8C%E6%A1%88%E4%BE%8B"><span class="toc-number">1.7.7.</span> <span class="toc-text">注册案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#UserService-java%E6%B7%BB%E5%8A%A0registter%E6%96%B9%E6%B3%95%EF%BC%8C%E4%BC%98%E5%8C%96"><span class="toc-number">1.7.7.1.</span> <span class="toc-text">UserService.java添加registter方法，优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#registerServlet-java%E4%BF%AE%E6%94%B9"><span class="toc-number">1.7.7.2.</span> <span class="toc-text">registerServlet.java修改</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#regiset-jsp"><span class="toc-number">1.7.7.3.</span> <span class="toc-text">regiset.jsp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#login-jsp-1"><span class="toc-number">1.7.7.4.</span> <span class="toc-text">login.jsp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA"><span class="toc-number">1.7.7.5.</span> <span class="toc-text">效果展示</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/d449ef7e.html" title="test01"><img src="/img/b9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="test01"/></a><div class="content"><a class="title" href="/post/d449ef7e.html" title="test01">test01</a><time datetime="2025-09-23T16:00:00.000Z" title="发表于 2025-09-24 00:00:00">2025-09-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/b34cc72c.html" title="逻辑论证1（削弱）"><img src="/img/g10.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="逻辑论证1（削弱）"/></a><div class="content"><a class="title" href="/post/b34cc72c.html" title="逻辑论证1（削弱）">逻辑论证1（削弱）</a><time datetime="2025-03-27T11:21:42.000Z" title="发表于 2025-03-27 19:21:42">2025-03-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/dbde71d8.html" title="组合排列"><img src="/img/g9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="组合排列"/></a><div class="content"><a class="title" href="/post/dbde71d8.html" title="组合排列">组合排列</a><time datetime="2025-03-26T01:18:37.000Z" title="发表于 2025-03-26 09:18:37">2025-03-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/d9a2d074.html" title="翻译推理"><img src="/img/g8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="翻译推理"/></a><div class="content"><a class="title" href="/post/d9a2d074.html" title="翻译推理">翻译推理</a><time datetime="2025-03-25T01:30:22.000Z" title="发表于 2025-03-25 09:30:22">2025-03-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/ef3d0435.html" title="判断推理_定义判断"><img src="/img/g7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="判断推理_定义判断"/></a><div class="content"><a class="title" href="/post/ef3d0435.html" title="判断推理_定义判断">判断推理_定义判断</a><time datetime="2025-03-19T11:12:43.000Z" title="发表于 2025-03-19 19:12:43">2025-03-19</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2025  <i id="heartbeat" class="fa fas fa-heartbeat"></i> 下完这场雨</div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://butterfly.js.org/">blog</a>!<br> <img src="https://haiyong.site/img/icp.png"> <a href="https://beian.miit.gov.cn/#/Integrated/index"  style="color:#87ceeb" target="_blank">豫ICP备2024090942号-1</a></div></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'VbfV1mFYBGUNtUKD0cr1qUls-gzGzoHsz',
      appKey: 'LssvKROPsftMFNCa4j2AnVL8',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: true
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script>function loadLivere () {
  if (typeof LivereTower === 'object') {
    window.LivereTower.init()
  }
  else {
    (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
    })(document, 'script');
  }
}

if ('Valine' === 'Livere' || !true) {
  if (true) btf.loadComment(document.getElementById('lv-container'), loadLivere)
  else loadLivere()
}
else {
  function loadOtherComment () {
    loadLivere()
  }
}</script></div><script src="https://cdn.jsdelivr.net/npm/blueimp-md5/js/md5.min.js"></script><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getIcon = (icon, mail) => {
    if (icon) return icon
    let defaultIcon = '?d=monsterid'
    let iconUrl = `https://gravatar.loli.net/avatar/${md5(mail.toLowerCase()) + defaultIcon}`
    return iconUrl
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const serverURL = 'https://VbfV1mFY.api.lncldglobal.com'

    var settings = {
      "method": "GET",
      "headers": {
        "X-LC-Id": 'VbfV1mFYBGUNtUKD0cr1qUls-gzGzoHsz',
        "X-LC-Key": 'LssvKROPsftMFNCa4j2AnVL8',
        "Content-Type": "application/json"
      },
    }

    fetch(`${serverURL}/1.1/classes/Comment?limit=6&order=-createdAt`,settings)
      .then(response => response.json())
      .then(data => {
        const valineArray = data.results.map(function (e) {
          return {
            'avatar': getIcon(e.QQAvatar, e.mail),
            'content': changeContent(e.comment),
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.updatedAt,
          }
        })
        saveToLocal.set('valine-newest-comments', JSON.stringify(valineArray), 10/(60*24))
        generateHtml(valineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      }) 
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('valine-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="592262222" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-lrctype="1" data-preload="none" data-autoplay="false" muted></div><script src="http://cdn.bootcss.com/pace/1.0.2/pace.min.js" async></script><script src="/js/weather.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="true" data-text="富强,民主,文明,和谐,平等,公正,法治,爱国,敬业,诚信,友善" data-fontsize="15px" data-random="random" async="async"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":60,"height":120,"hOffset":20,"vOffset":-20},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/"});</script></body></html>